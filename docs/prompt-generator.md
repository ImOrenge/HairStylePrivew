ë„¤, ììœ  ì…ë ¥ ë°©ì‹ìœ¼ë¡œ ë°©í–¥ì„ ì¡ìœ¼ì…¨êµ°ìš”! ì‚¬ìš©ìì—ê²Œ í›¨ì”¬ ë” í° ììœ ë„ë¥¼ ì£¼ëŠ” í›Œë¥­í•œ ê²°ì •ì…ë‹ˆë‹¤.

ë§ì”€í•˜ì‹  **'êµ¬ê¸€ ë‚˜ë…¸ë°”ë‚˜ë‚˜(Google Nano Banana)'**ì— ëŒ€í•´ ë¨¼ì € ì§šê³  ë„˜ì–´ê°€ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

í˜„ì¬ êµ¬ê¸€ì˜ ê³µì‹ AI ì œí’ˆ ë¼ì¸ì—… ì¤‘ì— 'ë‚˜ë…¸ë°”ë‚˜ë‚˜'ë¼ëŠ” ì´ë¦„ì˜ ê³µê°œëœ API ì„œë¹„ìŠ¤ëŠ” ì—†ìŠµë‹ˆë‹¤. ì•„ë§ˆë„ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì™€ í˜¼ë™í•˜ì…¨ê±°ë‚˜, ë‚´ë¶€ í”„ë¡œì íŠ¸ëª…ì„ ë“¤ìœ¼ì…¨ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.

1. **Google Gemini Nano:** ì•ˆë“œë¡œì´ë“œ ê¸°ê¸° ë“±ì—ì„œ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ì´ˆê²½ëŸ‰ ì˜¨ë””ë°”ì´ìŠ¤ AI ëª¨ë¸ì…ë‹ˆë‹¤. (ì„œë²„ APIìš©ìœ¼ë¡œëŠ” ë¶€ì í•©í•©ë‹ˆë‹¤.)
2. **Google Gemini Pro (ì¶”ì²œ):** ì„œë²„ì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ì„±ëŠ¥ì˜ ë²”ìš© LLM APIì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ í•„ìš”í•œ 'í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§' ì‘ì—…ì— ê°€ì¥ ì í•©í•©ë‹ˆë‹¤.

ì‚¬ìš©ìê°€ ëŒ€ì¶© ì…ë ¥í•œ í…ìŠ¤íŠ¸(ì˜ˆ: "ë‰´ì§„ìŠ¤ í•˜ë‹ˆ ë‹¨ë°œ")ë¥¼ AIê°€ ì´ë¯¸ì§€ ìƒì„±ì„ ì˜í•  ìˆ˜ ìˆëŠ” ì „ë¬¸ì ì¸ ì˜ì–´ ëª…ë ¹ì–´(í”„ë¡¬í”„íŠ¸)ë¡œ ë°”ê¿”ì£¼ëŠ” ì—­í• ì—ëŠ” **Google Gemini Pro API**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì—…ê³„ í‘œì¤€ì…ë‹ˆë‹¤.

ì´ê²ƒì„ 'ë‚˜ë…¸ë°”ë‚˜ë‚˜'ë¼ê³  í†µì¹­í•˜ì‹  ê²ƒìœ¼ë¡œ ì´í•´í•˜ê³ , **Next.jsì—ì„œ Google Gemini Pro APIë¥¼ í™œìš©í•´ 'í—¤ì–´ìŠ¤íƒ€ì¼ í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°'ë¥¼ ë§Œë“œëŠ” ë°©ë²•**ì„ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

### ğŸ› ï¸ êµ¬í˜„ ëª©í‘œ: "ê°œë–¡ê°™ì´ ë§í•´ë„ ì°°ë–¡ê°™ì´ ì•Œì•„ë“£ëŠ” AI"

* **ì‚¬ìš©ì ì…ë ¥:** "ìš”ì¦˜ ìœ í–‰í•˜ëŠ” ê°€ë²¼ìš´ ëŠë‚Œì˜ ë ˆì´ì–´ë“œì»· í•´ì¤˜, ì—¼ìƒ‰ì€ ì• ì‰¬ ë¸Œë¼ìš´ìœ¼ë¡œ."
* **Gemini API (ìš°ë¦¬ê°€ ë§Œë“¤ ê²ƒ):** ì´ ë§ì„ ì•Œì•„ë“£ê³  Stable Diffusionì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ì˜ì–´ ë¬¸ì¥ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
* *ê²°ê³¼ë¬¼:* `(masterpiece, best quality, photorealistic:1.3), a portrait of a woman with [light layered medium haircut with textured ends, ash brown hair color], trending korean hairstyle, natural studio lighting, sharp focus on hair...`



---

### ğŸ“œ Next.js API Route êµ¬í˜„ ì½”ë“œ (app/api/enhance-prompt/route.ts)

ë¨¼ì € í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install @google/generative-ai

```

ê·¸ë¦¬ê³  êµ¬ê¸€ AI ìŠ¤íŠœë””ì˜¤ì—ì„œ API í‚¤ë¥¼ ë°œê¸‰ë°›ì•„ `.env.local`ì— `GOOGLE_API_KEY=your_api_key_here`ë¡œ ì €ì¥í•˜ì„¸ìš”.

ë‹¤ìŒì€ ì‹¤ì œ API ë¼ìš°íŠ¸ ì½”ë“œì…ë‹ˆë‹¤. í•µì‹¬ì€ AIì—ê²Œ **'ë„ˆëŠ” ì „ë¬¸ í—¤ì–´ìŠ¤íƒ€ì¼ë¦¬ìŠ¤íŠ¸ì´ì í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ì•¼'**ë¼ê³  í˜ë¥´ì†Œë‚˜ë¥¼ ë¶€ì—¬í•˜ëŠ” ì‹œìŠ¤í…œ ì§€ì‹œë¬¸(System Instruction)ì…ë‹ˆë‹¤.

```typescript
// src/app/api/enhance-prompt/route.ts
import { GoogleGenerativeAI } from "@google/generative-ai";
import { NextResponse } from "next/server";

// 1. Google API í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
const genAI = new GoogleGenerativeAI(process.env.GOOGLE_API_KEY || "");

// 2. AIì—ê²Œ ë¶€ì—¬í•  í˜ë¥´ì†Œë‚˜ ë° ì§€ì¹¨ (í•µì‹¬!)
const SYSTEM_INSTRUCTION = `
You are an expert AI hair stylist and a professional prompt engineer for Stable Diffusion.
Your goal is to convert rough user descriptions of hairstyles into highly detailed, photorealistic image generation prompts in English.

Rules:
1.  Analyze the user's input to extract key elements: length, texture, color, bangs, and specific style names (e.g., "hush cut", "ivy league cut").
2.  Translate these elements into precise English descriptive terms.
3.  Always prepend standard quality boosters at the beginning: "(masterpiece, best quality, photorealistic:1.4), professional portrait, studio lighting,".
4.  Always append standard negative embeddings at the end: " --neg low quality, ugly, deformed face, extra limbs, blurry, bad anatomy, watermark, text".
5.  Output ONLY the final English prompt string. Do not include any conversational text.

Example Input: "ì•„ì´ìœ  ê°™ì€ ì¤‘ë‹¨ë°œ ë ˆì´ì–´ë“œì»·ì— ì‹œìŠ¤ë£¨ë±… ì¢€ ë„£ì–´ì¤˜"
Example Output: (masterpiece, best quality, photorealistic:1.4), professional portrait, studio lighting, medium length layered haircut with soft texture, wispy see-through bangs covering forehead naturally, dark brown hair color, IU K-pop star aesthetic, sharp focus on hair --neg low quality, ugly, deformed face, blurry
`;

export async function POST(request: Request) {
  try {
    const { userInput } = await request.json();

    if (!userInput) {
      return NextResponse.json({ error: "User input is required" }, { status: 400 });
    }

    // 3. Gemini Pro ëª¨ë¸ ì„¤ì •
    const model = genAI.getGenerativeModel({ 
      model: "gemini-pro",
      generationConfig: {
          temperature: 0.7, // ì•½ê°„ì˜ ì°½ì˜ì„± í—ˆìš©
          maxOutputTokens: 200,
      }
    });

    // 4. í”„ë¡¬í”„íŠ¸ ìƒì„± ìš”ì²­
    // ì‹œìŠ¤í…œ ì§€ì¹¨ê³¼ ì‚¬ìš©ì ì…ë ¥ì„ ê²°í•©í•˜ì—¬ ë³´ëƒ…ë‹ˆë‹¤.
    const combinedPrompt = `${SYSTEM_INSTRUCTION}\n\nUser Input: "${userInput}"\nOutput:`;
    
    const result = await model.generateContent(combinedPrompt);
    const response = await result.response;
    const enhancedPrompt = response.text();

    console.log("--- í”„ë¡¬í”„íŠ¸ ë³€í™˜ ê²°ê³¼ ---");
    console.log("ì…ë ¥:", userInput);
    console.log("ì¶œë ¥:", enhancedPrompt);

    // 5. ê²°ê³¼ ë°˜í™˜
    return NextResponse.json({ prompt: enhancedPrompt });

  } catch (error) {
    console.error("Gemini API Error:", error);
    return NextResponse.json({ error: "Failed to enhance prompt" }, { status: 500 });
  }
}

```

---

### ğŸš€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œì˜ ì‚¬ìš© íë¦„ (ê°„ëµ)

1. ì‚¬ìš©ìê°€ `generate/page.tsx`ì˜ í…ìŠ¤íŠ¸ ì…ë ¥ì°½ì— ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ì„ ì…ë ¥í•˜ê³  'ìƒì„±í•˜ê¸°' ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.
2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°©ê¸ˆ ë§Œë“  `/api/enhance-prompt`ë¡œ ì‚¬ìš©ìê°€ ì…ë ¥í•œ í…ìŠ¤íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
3. APIê°€ Geminië¥¼ í†µí•´ ë§Œë“  **ê³ í’ˆì§ˆ ì˜ì–´ í”„ë¡¬í”„íŠ¸**ë¥¼ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì¤ë‹ˆë‹¤.
4. í”„ë¡ íŠ¸ì—”ë“œëŠ” ì´ **ê³ í’ˆì§ˆ í”„ë¡¬í”„íŠ¸**ë¥¼ ë°›ì•„ì„œ, ì‹¤ì œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” AI ëª¨ë¸ API (ì˜ˆ: Replicateì˜ Stable Diffusion Inpainting ëª¨ë¸)ë¡œ ìµœì¢… ì „ì†¡í•©ë‹ˆë‹¤.

